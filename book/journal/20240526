* 2024-05-26
** 16:36 Aerial spincity
La requête https://player.vimeo.com/video/730450713?h=03dbb3b0b6&dnt=1&app_id=122963
donne du HTML avec dd

"cdn_url":"https://f.vimeocdn.com","vimeo_api_url":"api.vimeo.com","request":{"files":{"dash":{"cdns":{"akfire_interconnect_quic":{"avc_url":"https://vod-adaptive-ak.vimeocdn.com/exp=1716737719~acl=%2F9ee4c1f7-de97-42d7-b068-0c9d7d8fb280%2F%2A~hmac=c925cccdc0e26cc126113049dee869f770a476d98827b95a57ccaf428bb690c9/9ee4c1f7-de97-42d7-b068-0c9d7d8fb280/sep/video/11ef58c3,1b62eaf1,20547b60,606b3821/audio/0064b795,5ca0c4bf,b34bcda4/master.json?base64_init=1\u0026query_string_ranges=1","origin":"gcs","url":"https://vod-adaptive-ak.vimeocdn.com/exp=1716737719~acl=%2F9ee4c1f7-de97-42d7-b068-0c9d7d8fb280%2F%2A~hmac=c925cccdc0e26cc126113049dee869f770a476d98827b95a57ccaf428bb690c9/9ee4c1f7-de97-42d7-b068-0c9d7d8fb280/sep/video/11ef58c3,1b62eaf1,20547b60,606b3821/audio/0064b795,5ca0c4bf,b34bcda4/master.json?base64_init=1\u0026query_string_ranges=1"},"fastly_skyfire":{"avc_url":"https://skyfire.vimeocdn.com/1716737719-0xbc275d2aced72466d95821e414f14c69703b1b4d/9ee4c1f7-de97-42d7-b068-0c9d7d8fb280/sep/video/11ef58c3,1b62eaf1,20547b60,606b3821/audio/0064b795,5ca0c4bf,b34bcda4/master.json?base64_init=1\u0026query_string_ranges=1","origin":"gcs","url":"https://skyfire.vimeocdn.com/1716737719-0xbc275d2aced72466d95821e414f14c69703b1b4d/9ee4c1f7-de97-42d7-b068-0c9d7d8fb280/sep/video/11ef58c3,1b62eaf1,20547b60,606b3821/audio/0064b795,5ca0c4bf,b34bcda4/master.json?base64_init=1\u0026query_string_ranges=1"}},"default_cdn":"akfire_interconnect_quic","separate_av":true,"streams":[{"profile":"c3347cdf-6c91-4ab3-8d56-737128e7a65f","id":"20547b60-42d6-4e12-8a53-d6a5fe02f210","fps":25,"quality":"360p"},{"profile":"f9e4a5d7-8043-4af3-b231-641ca735a130","id":"606b3821-3734-4927-88dd-1cdb151f8dd9","fps":25,"quality":"540p"},{"profile":"d0b41bac-2bf2-4310-8113-df764d486192","id":"11ef58c3-b595-4881-b06d-61147be05fdc","fps":25,"quality":"240p"},{"profile":"f3f6f5f0-2e6b-4e90-994e-842d1feeabc0","id":"1b62eaf1-71f5-4510-8d14-adcd7624973f","fps":50,"quality":"720p"}],"streams_avc":[{"profile":"d0b41bac-2bf2-4310-8113-df764d486192","id":"11ef58c3-b595-4881-b06d-61147be05fdc","fps":25,"quality":"240p"},{"profile":"f3f6f5f0-2e6b-4e90-994e-842d1feeabc0","id":"1b62eaf1-71f5-4510-8d14-adcd7624973f","fps":50,"quality":"720p"},{"profile":"c3347cdf-6c91-4ab3-8d56-737128e7a65f","id":"20547b60-42d6-4e12-8a53-d6a5fe02f210","fps":25,"quality":"360p"},{"profile":"f9e4a5d7-8043-4af3-b231-641ca735a130","id":"606b3821-3734-4927-88dd-1cdb151f8dd9","fps":25,"quality":"540p"}]},"hls":{"cdns":{"akfire_interconnect_quic":{"avc_url":"https://vod-adaptive-ak.vimeocdn.com/exp=1716737719~acl=%2F9ee4c1f7-de97-42d7-b068-0c9d7d8fb280%2F%2A~hmac=c925cccdc0e26cc126113049dee869f770a476d98827b95a57ccaf428bb690c9/9ee4c1f7-de97-42d7-b068-0c9d7d8fb280/sep/video/11ef58c3,1b62eaf1,20547b60,606b3821/audio/b34bcda4/master.m3u8?query_string_ranges=1","origin":"gcs","url":"https://vod-adaptive-ak.vimeocdn.com/exp=1716737719~acl=%2F9ee4c1f7-de97-42d7-b068-0c9d7d8fb280%2F%2A~hmac=c925cccdc0e26cc126113049dee869f770a476d98827b95a57ccaf428bb690c9/9ee4c1f7-de97-42d7-b068-0c9d7d8fb280/sep/video/11ef58c3,1b62eaf1,20547b60,606b3821/audio/b34bcda4/master.m3u8?query_string_ranges=1"},"fastly_skyfire":{"avc_url":"https://skyfire.vimeocdn.com/1716737719-0xbc275d2aced72466d95821e414f14c69703b1b4d/9ee4c1f7-de97-42d7-b068-0c9d7d8fb280/sep/video/11ef58c3,1b62eaf1,20547b60,606b3821/audio/b34bcda4/master.m3u8?query_string_ranges=1","origin":"gcs","url":"https://skyfire.vimeocdn.com/1716737719-0xbc275d2aced72466d95821e414f14c69703b1b4d/9ee4c1f7-de97-42d7-b068-0c9d7d8fb280/sep/video/11ef58c3,1b62eaf1,20547b60,606b3821/audio/b34bcda4/master.m3u8?query_string_ranges=1"}},"default_cdn":"akfire_interconnect_quic","separate_av":true}},"file_codecs":{"av1":[],"avc":["11ef58c3-b595-4881-b06d-61147be05fdc","1b62eaf1-71f5-4510-8d14-adcd7624973f","20547b60-42d6-4e12-8a53-d6a5fe02f210","606b3821-3734-4927-88dd-1cdb151f8dd9"],"hevc":{"dvh1":[],"hdr":[],"sdr":[]}},"lang":"en","referrer":"https://www.teamspincity.com/","cookie_domain":".vimeo.com","signature":"f7ef663fd8760c8cbf7d8ab27e805170","timestamp":1716734119,"expires":3600,"thumb_preview":{"url":"https://videoapi-sprites.vimeocdn.com/video-sprites/image/65f79783-4a73-487e-90ca-c431a532283d.0.jpeg?ClientID=sulu\u0026Expires=1716737719\u0026Signature=7e407bfcb998d60ab08da2084315bb37e6b2eccd","height":2640,"width":4686,"frame_height":240,"frame_width":426,"columns":11,"frames":120},"currency":"EUR","session":"0ceb2a351d36fa0f7dce27daf3a10db5f6d05e411716734119","cookie":{"volume":1,"quality":null,"hd":0,"captions":null,"transcript":null,"captions_styles":{"color":null,"fontSize":null,"fontFamily":null,"fontOpacity":null,"bgOpacity":null,"windowColor":null,"windowOpacity":null,"bgColor":null,"edgeStyle":null},"audio_language":null,"audio_kind":null,"qoe_survey_vote":0},"build":{"backend":"93f7a16","js":"4.33.8"},"urls":{"fresnel":"https://fresnel.vimeocdn.com/add/player-stats","barebone_js":"https://f.vimeocdn.com/p/4.33.8/js/barebone.js","chromeless_js":"https://f.vimeocdn.com/p/4.33.8/js/chromeless.js","ambisonics_js":"https://f.vimeocdn.com/p/external/ambisonics.min.js","chromeless_css":"https://f.vimeocdn.com/p/4.33.8/css/chromeless.css","css":"https://f.vimeocdn.com/p/4.33.8/css/player.css","js":"https://f.vimeocdn.com/p/4.33.8/js/player.js","proxy":"https://player.vimeo.com/static/proxy.html","hive_sdk":"https://f.vimeocdn.com/p/external/hive-sdk.js","hive_interceptor":"https://f.vimeocdn.com/p/external/hive-interceptor.js","three_js":"https://f.vimeocdn.com/p/external/three.rvimeo.min.js","player_telemetry_url":"https://player-telemetry.vimeo.com/player-events","fresnel_mimir_inputs_url":"https://fresnel-events.vimeocdn.com/add/mimir_inputs","fresnel_manifest_url":"https://fresnel-events.vimeocdn.com/add/playback_manifest","fresnel_chunk_url":"https://fresnel-events.vimeocdn.com/add/chunk_downloads","test_imp":"https://fresnel.vimeocdn.com/add/player-test-impression","js_module":"https://f.vimeocdn.com/p/4.33.8/js/player.module.js","js_vendor_module":"https://f.vimeocdn.com/p/4.33.8/js/vendor.module.js","js_base":"https://f.vimeocdn.com/p/4.33.8/js","locales_js":{"de-DE":"https://f.vimeocdn.com/p/4.33.8/js/player.de-DE.js","en":"https://f.vimeocdn.com/p/4.33.8/js/player.js","es":"https://f.vimeocdn.com/p/4.33.8/js/player.es.js","fr-FR":"https://f.vimeocdn.com/p/4.33.8/js/player.fr-FR.js","ja-JP":"https://f.vimeocdn.com/p/4.33.8/js/player.ja-JP.js","ko-KR":"https://f.vimeocdn.com/p/4.33.8/js/player.ko-KR.js","pt-BR":"https://f.vimeocdn.com/p/4.33.8/js/player.pt-BR.js","ru-RU":"https://f.vimeocdn.com/p/4.33.8/js/player.ru-RU.js"}},"flags":{"plays":1,"dnt":1,"autohide_controls":0,"preload_video":"metadata_on_hover","qoe_survey_forced":0,"view_time_tracking_forced":0,"ai_widget":0,"access_gates":0,"ecdn_delta_updates":0},"country":"FR","client":{"ip":"90.18.177.84"},"ab_tests":{}},"player_url":"player.vimeo.com","video":{"id":870620597,"title":"Cross back seat","width":1280,"height":720,"duration":155,"url":"","share_url":"https://vimeo.com/870620597","embed_code":"\u003ciframe title=\"vimeo-player\" src=\"https://player.vimeo.com/video/870620597?h=ad86e8748c\" width=\"640\" height=\"360\" frameborder=\"0\"    allowfullscreen\u003e\u003c/iframe\u003e","default_to_hd":0,"privacy":"disable","embed_permission":"whitelist","thumbs":{"1280":"https://i.vimeocdn.com/video/1732815038-54ed4ca50084a62e6c7032e40d80985fca47d833bbb8bb2068e0a7d29903900e-d_1280","640":"https://i.vimeocdn.com/video/1732815038-54ed4ca50084a62e6c7032e40d80985fca47d833bbb8bb2068e0a7d29903900e-d_640","960":"https://i.vimeocdn.com/video/1732815038-54ed4ca50084a62e6c7032e40d80985fca47d833bbb8bb2068e0a7d29903900e-d_960","base":"https://i.vimeocdn.com/video/1732815038-54ed4ca50084a62e6c7032e40d80985fca47d833bbb8bb2068e0a7d29903900e-d"},"owner":{"id":23156778,"name":"Spin City Instructor Training","img":"https://i.vimeocdn.com/portrait/62887426_60x60","img_2x":"https://i.vimeocdn.com/portrait/62887426_60x60","url":"https://vimeo.com/teamspincity","account_type":"business"},"spatial":0,"live_event":null,"version":{"current":null,"available":[{"id":788104075,"file_id":3663873468,"is_current":true}]},"unlisted_hash":null,"rating":{"id":3},"fps":25,"channel_layout":"stereo"},"user":{"id":0,"team_id":0,"team_origin_user_id":0,"account_type":"none","liked":0,"watch_later":0,"owner":0,"mod":0,"logged_in":0,"private_mode_enabled":0,"vimeo_api_client_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZXNzaW9uX2lkIjoiMGNlYjJhMzUxZDM2ZmEwZjdkY2UyN2RhZjNhMTBkYjVmNmQwNWU0MTE3MTY3MzQxMTkiLCJleHAiOjE3MTY3Mzc3MTksImFwcF9pZCI6MTE4MzU5LCJzY29wZXMiOiJwdWJsaWMgc3RhdHMifQ.izmunJIjUXi8XScTcUQkIgAQDt0FBxXD3Je4mvLK10Y"},"view":1,"vimeo_url":"vimeo.com","embed":{"autoplay":0,"autopause":1,"dnt":1,"editor":0,"keyboard":1,"log_plays":1,"loop":0,"muted":0,"on_site":0,"texttrack":"","transparent":1,"outro":"videos","playsinline":1,"quality":null,"player_id":"","api":null,"app_id":"122963","color":"00adef","color_one":"000000","color_two":"00adef","color_three":"ffffff","color_four":"000000","context":"embed.main","settings":{"auto_pip":1,"badge":0,"byline":1,"collections":0,"color":0,"force_color_one":0,"force_color_two":0,"force_color_three":0,"force_color_four":0,"embed":0,"fullscreen":1,"like":0,"logo":0,"playbar":1,"portrait":1,"pip":1,"share":0,"spatial_compass":0,"spatial_label":0,"speed":1,"title":1,"volume":1,"watch_later":0,"watch_full_video":1,"controls":1,"airplay":1,"audio_tracks":1,"chapters":1,"chromecast":1,"cc":1,"transcript":1,"reaction":0,"quality":1,"play_button_position":0,"ask_ai":0},"create_interactive":{"has_create_interactive":false,"viddata_url":""}}}</script>
<script>const fullscreenSupported="exitFullscreen"in document||"webkitExitFullscreen"in document||"webkitCancelFullScreen"in document||"mozCancelFullScreen"in document||"msExitFullscreen"in document||"webkitEnterFullScreen"in document.createElement("video");var isIE=checkIE(window.navigator.userAgent),incompatibleBrowser=!fullscreenSupported||isIE;window.noModuleLoading=!1,window.dynamicImportSupported=!1,window.isInIFrame=function(){try{return window.self!==window.top}catch(e){return!0}}(),!window.isInIFrame&&/twitter/i.test(navigator.userAgent)&&window.playerConfig.video.url&&(window.location=window.playerConfig.video.url),window.playerConfig.request.lang&&document.documentElement.setAttribute("lang",window.playerConfig.request.lang),window.loadScript=function(e){var n=document.getElementsByTagName("script")[0];n&&n.parentNode?n.parentNode.insertBefore(e,n):document.head.appendChild(e)},window.loadVUID=function(){if(!window.playerConfig.request.flags.dnt&&!window.playerConfig.embed.dnt){window._vuid=[["pid",window.playerConfig.request.session]];var e=document.createElement("script");e.async=!0,e.src=window.playerConfig.request.urls.vuid_js,window.loadScript(e)}},window.loadCSS=function(e,n){var i={cssDone:!1,startTime:new Date().getTime(),link:e.createElement("link")};return i.link.rel="stylesheet",i.link.href=n,e.getElementsByTagName("head")[0].appendChild(i.link),i.link.onload=function(){i.cssDone=!0},i},window.loadLegacyJS=function(e,n){if(incompatibleBrowser){var i=e.querySelector(".vp-placeholder");i&&i.parentNode&&i.parentNode.removeChild(i);let o=`/video/${window.playerConfig.video.id}/fallback`;window.playerConfig.request.referrer&&(o+=`?referrer=${window.playerConfig.request.referrer}`),n.innerHTML=`<div class="fallback"><iframe title="unsupported message" src="${o}" frameborder="0"></iframe></div>`}else{n.className="player loading";var t=window.loadCSS(e,window.playerConfig.request.urls.css),r=e.createElement("script"),a=!1;r.src=window.playerConfig.request.urls.js,window.loadScript(r),r["onreadystatechange"in r?"onreadystatechange":"onload"]=function(){!a&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(a=!0,playerObject=new VimeoPlayer(n,window.playerConfig,t.cssDone||{link:t.link,startTime:t.startTime}))},window.loadVUID()}};function checkIE(e){e=e&&e.toLowerCase?e.toLowerCase():"";function n(r){return r=r.toLowerCase(),new RegExp(r).test(e);return browserRegEx}var i=n("msie")?parseFloat(e.replace(/^.*msie (\d+).*$/,"$1")):!1,t=n("trident")?parseFloat(e.replace(/^.*trident\/(\d+)\.(\d+).*$/,"$1.$2"))+4:!1;return i||t}
</script>
Mais on ne peut pas utiliser directement l'API avec le token
** 19:14 Aerial spincity
Pas de son pour certaines videos !
Pour audio/video, il suffit de concatener les URL relative. urllib fait ça bien.
** 22:27 Scidataflow
sdf pull seulement certains fichiers : arguments optionel
Réflexion sur structure
- un asset par version majeure du génome ?
