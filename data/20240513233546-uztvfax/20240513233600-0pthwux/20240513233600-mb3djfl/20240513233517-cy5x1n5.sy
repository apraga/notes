{"ID":"20240513233517-cy5x1n5","Spec":"1","Type":"NodeDocument","Properties":{"id":"20240513233517-cy5x1n5","title":"performances","type":"doc","updated":"20240513233517"},"Children":[{"ID":"20240513233518-mvnm14a","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240513233518-mvnm14a","updated":"20240513233518"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeText","Data":"Performances"}]},{"ID":"20240513233519-hmd6jbu","Type":"NodeParagraph","Properties":{"id":"20240513233519-hmd6jbu","updated":"20240513233519"},"Children":[{"Type":"NodeText","Data":"Statistiques pour tout le pipeline"}]},{"ID":"20240513233520-las11sh","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240513233520-las11sh","updated":"20240513233520"},"Children":[{"ID":"20240513233521-6vfkcm1","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240513233521-6vfkcm1","updated":"20240513233521"},"Children":[{"ID":"20240513233522-kzii3bl","Type":"NodeParagraph","Properties":{"id":"20240513233522-kzii3bl","updated":"20240513233522"},"Children":[{"Type":"NodeText","Data":"montrer le timeline report (à partir du trace report)"}]}]},{"ID":"20240513233523-4v1syki","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240513233523-4v1syki","updated":"20240513233523"},"Children":[{"ID":"20240513233524-ak05klk","Type":"NodeParagraph","Properties":{"id":"20240513233524-ak05klk","updated":"20240513233524"},"Children":[{"Type":"NodeText","Data":"regarder execution report  https://www.nextflow.io/docs/latest/tracing.html#execution-report"}]}]}]},{"ID":"20240513233525-1zlgp29","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513233525-1zlgp29","updated":"20240513233525"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"BWA mem"}]},{"ID":"20240513233526-fh5id7l","Type":"NodeParagraph","Properties":{"id":"20240513233526-fh5id7l","updated":"20240513233526"},"Children":[{"Type":"NodeText","Data":"Le plus simple est d'utiliser hyperfine pour lancer des runs successifs en faisant varier le numbre de threads."}]},{"ID":"20240513233527-thz7t9w","Type":"NodeParagraph","Properties":{"id":"20240513233527-thz7t9w","updated":"20240513233527"},"Children":[{"Type":"NodeText","Data":"Il est trop long de tester plusieurs fois chaque possibilité. Test sur 3 runs en séquentiel (50G mémoire)"}]},{"ID":"20240513233528-rmasms2","Type":"NodeParagraph","Properties":{"id":"20240513233528-rmasms2","updated":"20240513233528"},"Children":[{"Type":"NodeText","Data":"Time (mean ± σ):     13725.110 s ± 42.090 s    [User: 13870.522 s, System: 12.543 s]"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Range (min … max):   13677.219 s … 13756.226 s    3 runs"}]},{"ID":"20240513233529-xq44up3","Type":"NodeParagraph","Properties":{"id":"20240513233529-xq44up3","updated":"20240513233529"},"Children":[{"Type":"NodeText","Data":"Donc un seul run par configuration avec une demande de 32 coeurs et 50G (en prod, 24 coeurs et 50G) de manière décroissante"}]},{"ID":"20240513233530-z7cq24i","Type":"NodeParagraph","Properties":{"id":"20240513233530-z7cq24i","updated":"20240513233530"},"Children":[{"Type":"NodeText","Data":"#!/bin/bash -l"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"# Fichier submission.SBATCH"}]},{"ID":"20240513233531-bd4v17i","Type":"NodeParagraph","Properties":{"id":"20240513233531-bd4v17i","updated":"20240513233531"},"Children":[{"Type":"NodeText","Data":"#SBATCH --job-name=\"speedup-bwa\""},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"#SBATCH --output=%x.%J.out   ## %x=job name, %J=job id"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"#SBATCH --error=%x.%J.out"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"# walltime (hh:mm::ss) max is 8 days"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"#SBATCH -t 24:00:00"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"#SBATCH --partition=smp"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"#SBATCH -c 32 ## request 16 cores (MAX is 32)"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"#SBATCH --mem=50G ## (MAX is 96G)"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"#SBATCH --mail-user=apraga@chu-besancon.fr"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"#SBATCH --mail-type=END,FAIL   # notify when job end/fail"}]},{"ID":"20240513233532-t63pr43","Type":"NodeParagraph","Properties":{"id":"20240513233532-t63pr43","updated":"20240513233532"},"Children":[{"Type":"NodeText","Data":"module load nix/2.11.0"}]},{"ID":"20240513233533-tds14av","Type":"NodeParagraph","Properties":{"id":"20240513233533-tds14av","updated":"20240513233533"},"Children":[{"Type":"NodeText","Data":"# Requires a working directory by nextflow"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"cd /Work/Users/apraga/bisonex/work/8c/cf49fd4508404faa6986ca4b211e49"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"INDEX="},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"find -L ./ -name \u0026quot;*.amb\u0026quot; | sed 's/\\.amb$//'"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"# 1 run for each numbers of threads"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"# JSON output is needed to have the stats for each run"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"# Don't do all configuration and starts from the more expensive"}]},{"ID":"20240513233534-s69atv5","Type":"NodeParagraph","Properties":{"id":"20240513233534-s69atv5","updated":"20240513233534"},"Children":[{"Type":"NodeText","Data":"hyperfine  --export-json hyperfine.json -L threads 32,24,16,8,4,2,1 --runs 1 \"bwa mem -R '@RG\\tID:sample\\tSM:sample\\tPL:ILLUMINA\\tPM:Miseq\\tCN:CHU_Minjoz\\tLB:definition_to_add' -t {threads} $INDEX k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"15b90d6813adf03787af0b2b90d708f1.fastq.gz k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"9c41c3effaeead78e1becee8a49cb0ea.fastq.gz\""}]},{"ID":"20240513233535-6nrk0s3","Type":"NodeParagraph","Properties":{"id":"20240513233535-6nrk0s3","updated":"20240513233535"},"Children":[{"Type":"NodeText","Data":"Note : il faut bien avoir le JSON en format de sortie pour avoir le temps de chaque run et pas seulement les statitistiques."},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Note : penser à bien remplacer le nombre de threads !"}]},{"ID":"20240513233536-ep69qty","Type":"NodeParagraph","Properties":{"id":"20240513233536-ep69qty","updated":"20240513233536"},"Children":[{"Type":"NodeText","Data":"Résultat dans research/bisonex/code/plot/speedup-bwa.json"}]},{"ID":"20240513233537-0y2lz4e","Type":"NodeParagraph","Properties":{"id":"20240513233537-0y2lz4e","updated":"20240513233537"},"Children":[{"Type":"NodeText","Data":"Benchmark 1: bwa mem -R '@RG\\tID:sample\\tSM:sample\\tPL:ILLUMINA\\tPM:Miseq\\tCN:CHU_Minjoz\\tLB:definition_to_add' -t 32 ./bwa/GCA_000001405.15_GRCh38_full_analysis_set.fna k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"15b90d6813adf03787af0b2b90d708f1.fastq.gz k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"9c41c3effaeead78e1becee8a49cb0ea.fastq.gz"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Time (abs ≡):        684.408 s               [User: 18007.678 s, System: 115.024 s]"}]},{"ID":"20240513233538-7eg8e9g","Type":"NodeParagraph","Properties":{"id":"20240513233538-7eg8e9g","updated":"20240513233538"},"Children":[{"Type":"NodeText","Data":"Benchmark 2: bwa mem -R '@RG\\tID:sample\\tSM:sample\\tPL:ILLUMINA\\tPM:Miseq\\tCN:CHU_Minjoz\\tLB:definition_to_add' -t 24 ./bwa/GCA_000001405.15_GRCh38_full_analysis_set.fna k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"15b90d6813adf03787af0b2b90d708f1.fastq.gz k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"9c41c3effaeead78e1becee8a49cb0ea.fastq.gz"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Time (abs ≡):        760.921 s               [User: 17606.845 s, System: 102.416 s]"}]},{"ID":"20240513233539-g0bpf7z","Type":"NodeParagraph","Properties":{"id":"20240513233539-g0bpf7z","updated":"20240513233539"},"Children":[{"Type":"NodeText","Data":"Benchmark 3: bwa mem -R '@RG\\tID:sample\\tSM:sample\\tPL:ILLUMINA\\tPM:Miseq\\tCN:CHU_Minjoz\\tLB:definition_to_add' -t 16 ./bwa/GCA_000001405.15_GRCh38_full_analysis_set.fna k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"15b90d6813adf03787af0b2b90d708f1.fastq.gz k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"9c41c3effaeead78e1becee8a49cb0ea.fastq.gz"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Time (abs ≡):        1115.368 s               [User: 17417.684 s, System: 115.360 s]"}]},{"ID":"20240513233540-874c72a","Type":"NodeParagraph","Properties":{"id":"20240513233540-874c72a","updated":"20240513233540"},"Children":[{"Type":"NodeText","Data":"Benchmark 4: bwa mem -R '@RG\\tID:sample\\tSM:sample\\tPL:ILLUMINA\\tPM:Miseq\\tCN:CHU_Minjoz\\tLB:definition_to_add' -t 8 ./bwa/GCA_000001405.15_GRCh38_full_analysis_set.fna k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"15b90d6813adf03787af0b2b90d708f1.fastq.gz k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"9c41c3effaeead78e1becee8a49cb0ea.fastq.gz"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Time (abs ≡):        2149.281 s               [User: 17083.367 s, System: 91.516 s]"}]},{"ID":"20240513233541-xswplom","Type":"NodeParagraph","Properties":{"id":"20240513233541-xswplom","updated":"20240513233541"},"Children":[{"Type":"NodeText","Data":"Benchmark 5: bwa mem -R '@RG\\tID:sample\\tSM:sample\\tPL:ILLUMINA\\tPM:Miseq\\tCN:CHU_Minjoz\\tLB:definition_to_add' -t 4 ./bwa/GCA_000001405.15_GRCh38_full_analysis_set.fna k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"15b90d6813adf03787af0b2b90d708f1.fastq.gz k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"9c41c3effaeead78e1becee8a49cb0ea.fastq.gz"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Time (abs ≡):        4262.605 s               [User: 16936.132 s, System: 177.830 s]"}]},{"ID":"20240513233542-c9k2zy9","Type":"NodeParagraph","Properties":{"id":"20240513233542-c9k2zy9","updated":"20240513233542"},"Children":[{"Type":"NodeText","Data":"Benchmark 6: bwa mem -R '@RG\\tID:sample\\tSM:sample\\tPL:ILLUMINA\\tPM:Miseq\\tCN:CHU_Minjoz\\tLB:definition_to_add' -t 2 ./bwa/GCA_000001405.15_GRCh38_full_analysis_set.fna k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"15b90d6813adf03787af0b2b90d708f1.fastq.gz k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"9c41c3effaeead78e1becee8a49cb0ea.fastq.gz"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Time (abs ≡):        8313.601 s               [User: 16411.816 s, System: 332.537 s]"}]},{"ID":"20240513233543-af5w223","Type":"NodeParagraph","Properties":{"id":"20240513233543-af5w223","updated":"20240513233543"},"Children":[{"Type":"NodeText","Data":"Benchmark 7: bwa mem -R '@RG\\tID:sample\\tSM:sample\\tPL:ILLUMINA\\tPM:Miseq\\tCN:CHU_Minjoz\\tLB:definition_to_add' -t 1 ./bwa/GCA_000001405.15_GRCh38_full_analysis_set.fna k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"15b90d6813adf03787af0b2b90d708f1.fastq.gz k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"9c41c3effaeead78e1becee8a49cb0ea.fastq.gz"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Time (abs ≡):        15049.006 s               [User: 15075.411 s, System: 134.121 s]"}]},{"ID":"20240513233544-g95e7y6","Type":"NodeParagraph","Properties":{"id":"20240513233544-g95e7y6","updated":"20240513233544"},"Children":[{"Type":"NodeText","Data":"Summary"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"bwa mem -R '@RG\\tID:sample\\tSM:sample\\tPL:ILLUMINA\\tPM:Miseq\\tCN:CHU_Minjoz\\tLB:definition_to_add' -t 32 ./bwa/GCA_000001405.15_GRCh38_full_analysis_set.fna k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"15b90d6813adf03787af0b2b90d708f1.fastq.gz k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"9c41c3effaeead78e1becee8a49cb0ea.fastq.gz ran"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"1.11 times faster than bwa mem -R '@RG\\tID:sample\\tSM:sample\\tPL:ILLUMINA\\tPM:Miseq\\tCN:CHU_Minjoz\\tLB:definition_to_add' -t 24 ./bwa/GCA_000001405.15_GRCh38_full_analysis_set.fna k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"15b90d6813adf03787af0b2b90d708f1.fastq.gz k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"9c41c3effaeead78e1becee8a49cb0ea.fastq.gz"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"1.63 times faster than bwa mem -R '@RG\\tID:sample\\tSM:sample\\tPL:ILLUMINA\\tPM:Miseq\\tCN:CHU_Minjoz\\tLB:definition_to_add' -t 16 ./bwa/GCA_000001405.15_GRCh38_full_analysis_set.fna k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"15b90d6813adf03787af0b2b90d708f1.fastq.gz k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"9c41c3effaeead78e1becee8a49cb0ea.fastq.gz"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"3.14 times faster than bwa mem -R '@RG\\tID:sample\\tSM:sample\\tPL:ILLUMINA\\tPM:Miseq\\tCN:CHU_Minjoz\\tLB:definition_to_add' -t 8 ./bwa/GCA_000001405.15_GRCh38_full_analysis_set.fna k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"15b90d6813adf03787af0b2b90d708f1.fastq.gz k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"9c41c3effaeead78e1becee8a49cb0ea.fastq.gz"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"6.23 times faster than bwa mem -R '@RG\\tID:sample\\tSM:sample\\tPL:ILLUMINA\\tPM:Miseq\\tCN:CHU_Minjoz\\tLB:definition_to_add' -t 4 ./bwa/GCA_000001405.15_GRCh38_full_analysis_set.fna k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"15b90d6813adf03787af0b2b90d708f1.fastq.gz k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"9c41c3effaeead78e1becee8a49cb0ea.fastq.gz"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"12.15 times faster than bwa mem -R '@RG\\tID:sample\\tSM:sample\\tPL:ILLUMINA\\tPM:Miseq\\tCN:CHU_Minjoz\\tLB:definition_to_add' -t 2 ./bwa/GCA_000001405.15_GRCh38_full_analysis_set.fna k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"15b90d6813adf03787af0b2b90d708f1.fastq.gz k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"9c41c3effaeead78e1becee8a49cb0ea.fastq.gz"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"21.99 times faster than bwa mem -R '@RG\\tID:sample\\tSM:sample\\tPL:ILLUMINA\\tPM:Miseq\\tCN:CHU_Minjoz\\tLB:definition_to_add' -t 1 ./bwa/GCA_000001405.15_GRCh38_full_analysis_set.fna k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"15b90d6813adf03787af0b2b90d708f1.fastq.gz k12"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":":","Properties":{"id":""}}]},{"Type":"NodeText","Data":"9c41c3effaeead78e1becee8a49cb0ea.fastq.gz## Haplotypecaller"}]},{"ID":"20240513233545-xfixj8t","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513233545-xfixj8t","updated":"20240513233545"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"Haplotypecaller"}]},{"ID":"20240513233546-d03p7mj","Type":"NodeParagraph","Properties":{"id":"20240513233546-d03p7mj","updated":"20240513233546"},"Children":[{"Type":"NodeText","Data":"Pour haplotypecaller, il n'y a plus moyen de spécifier les threads avec la version 4... Est-ce vraiment parallélisé ?"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"PairHMM au moins est parallélisé avec OpenMP. On teste avec"}]},{"ID":"20240513233547-cdsq7k2","Type":"NodeParagraph","Properties":{"id":"20240513233547-cdsq7k2","updated":"20240513233547"},"Children":[{"Type":"NodeText","Data":"#!/bin/bash -l"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"# Fichier submission.SBATCH"}]},{"ID":"20240513233548-kd707h0","Type":"NodeParagraph","Properties":{"id":"20240513233548-kd707h0","updated":"20240513233548"},"Children":[{"Type":"NodeText","Data":"#SBATCH --job-name=\"speedup-haplo\""},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"#SBATCH --output=%x.%J.out   ## %x=job name, %J=job id"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"#SBATCH --error=%x.%J.out"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"# walltime (hh:mm::ss) max is 8 days"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"#SBATCH -t 24:00:00"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"#SBATCH --partition=smp"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"#SBATCH -c 16 ## request 16 cores (MAX is 32)"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"#SBATCH --mem=16G ## (MAX is 96G)"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"#SBATCH --mail-user=apraga@chu-besancon.fr"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"#SBATCH --mail-type=END,FAIL   # notify when job end/fail"}]},{"ID":"20240513233549-n80tcdn","Type":"NodeParagraph","Properties":{"id":"20240513233549-n80tcdn","updated":"20240513233549"},"Children":[{"Type":"NodeText","Data":"module load nix/2.11.0"}]},{"ID":"20240513233550-kzwrwus","Type":"NodeParagraph","Properties":{"id":"20240513233550-kzwrwus","updated":"20240513233550"},"Children":[{"Type":"NodeText","Data":"cd /Work/Users/apraga/bisonex/work/d4/5b6f4963533a6319c3c67d4731e511"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"hyperfine --export-json hyperfine-haplo -L threads 12,6,4,2,1 --runs 1 \"gatk --java-options "},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":"\"","Properties":{"id":""}}]},{"Type":"NodeText","Data":"-Xmx13107M"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":"\"","Properties":{"id":""}}]},{"Type":"NodeText","Data":" HaplotypeCaller  --input HG001-HiSeq4000-Agilentv7-GRCh38.recal.bam  --output HG001-HiSeq4000-Agilentv7-GRCh38.haplotypecaller.vcf.gz  --reference GCA_000001405.15_GRCh38_full_analysis_set.fna  --dbsnp GCF_000001405.40.gz  --tmp-dir .  --max-mnp-distance 2\""}]},{"ID":"20240513233551-sla77hm","Type":"NodeParagraph","Properties":{"id":"20240513233551-sla77hm","updated":"20240513233551"},"Children":[{"Type":"NodeText","Data":"Résultat dans research/bisonex/code/plot/speedup-haplo.json"}]},{"ID":"20240513233552-2zmcwjs","Type":"NodeParagraph","Properties":{"id":"20240513233552-2zmcwjs","updated":"20240513233552"},"Children":[{"Type":"NodeText","Data":"Benchmark 1: gatk --java-options \"-Xmx13107M\" HaplotypeCaller  --input HG001-HiSeq4000-Agilentv7-GRCh38.recal.bam  --output HG001-HiSeq4000-Agilentv7-GRCh38.haplotypecaller.vcf.gz  --reference GCA_000001405.15_GRCh38_full_analysis_set.fna  --dbsnp GCF_000001405.40.gz  --tmp-dir .  --max-mnp-distance 2 (threads = 12)"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Time (abs ≡):        14428.832 s               [User: 14399.964 s, System: 213.747 s]"}]},{"ID":"20240513233553-nz8hr08","Type":"NodeParagraph","Properties":{"id":"20240513233553-nz8hr08","updated":"20240513233553"},"Children":[{"Type":"NodeText","Data":"Benchmark 2: gatk --java-options \"-Xmx13107M\" HaplotypeCaller  --input HG001-HiSeq4000-Agilentv7-GRCh38.recal.bam  --output HG001-HiSeq4000-Agilentv7-GRCh38.haplotypecaller.vcf.gz  --reference GCA_000001405.15_GRCh38_full_analysis_set.fna  --dbsnp GCF_000001405.40.gz  --tmp-dir .  --max-mnp-distance 2 (threads = 6)"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Time (abs ≡):        14164.462 s               [User: 14128.192 s, System: 198.870 s]"}]},{"ID":"20240513233554-f1a8rgx","Type":"NodeParagraph","Properties":{"id":"20240513233554-f1a8rgx","updated":"20240513233554"},"Children":[{"Type":"NodeText","Data":"Benchmark 3: gatk --java-options \"-Xmx13107M\" HaplotypeCaller  --input HG001-HiSeq4000-Agilentv7-GRCh38.recal.bam  --output HG001-HiSeq4000-Agilentv7-GRCh38.haplotypecaller.vcf.gz  --reference GCA_000001405.15_GRCh38_full_analysis_set.fna  --dbsnp GCF_000001405.40.gz  --tmp-dir .  --max-mnp-distance 2 (threads = 4)"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Time (abs ≡):        14215.604 s               [User: 14214.320 s, System: 216.795 s]"}]},{"ID":"20240513233555-eh5f9sk","Type":"NodeParagraph","Properties":{"id":"20240513233555-eh5f9sk","updated":"20240513233555"},"Children":[{"Type":"NodeText","Data":"Benchmark 4: gatk --java-options \"-Xmx13107M\" HaplotypeCaller  --input HG001-HiSeq4000-Agilentv7-GRCh38.recal.bam  --output HG001-HiSeq4000-Agilentv7-GRCh38.haplotypecaller.vcf.gz  --reference GCA_000001405.15_GRCh38_full_analysis_set.fna  --dbsnp GCF_000001405.40.gz  --tmp-dir .  --max-mnp-distance 2 (threads = 2)"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Time (abs ≡):        14308.381 s               [User: 14294.416 s, System: 213.043 s]"}]},{"ID":"20240513233556-5st4w8s","Type":"NodeParagraph","Properties":{"id":"20240513233556-5st4w8s","updated":"20240513233556"},"Children":[{"Type":"NodeText","Data":"Benchmark 5: gatk --java-options \"-Xmx13107M\" HaplotypeCaller  --input HG001-HiSeq4000-Agilentv7-GRCh38.recal.bam  --output HG001-HiSeq4000-Agilentv7-GRCh38.haplotypecaller.vcf.gz  --reference GCA_000001405.15_GRCh38_full_analysis_set.fna  --dbsnp GCF_000001405.40.gz  --tmp-dir .  --max-mnp-distance 2 (threads = 1)"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Time (abs ≡):        14136.094 s               [User: 14064.118 s, System: 175.672 s]"}]},{"ID":"20240513233557-r5bvvn5","Type":"NodeParagraph","Properties":{"id":"20240513233557-r5bvvn5","updated":"20240513233557"},"Children":[{"Type":"NodeText","Data":"Summary"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"gatk --java-options \"-Xmx13107M\" HaplotypeCaller  --input HG001-HiSeq4000-Agilentv7-GRCh38.recal.bam  --output HG001-HiSeq4000-Agilentv7-GRCh38.haplotypecaller.vcf.gz  --reference GCA_000001405.15_GRCh38_full_analysis_set.fna  --dbsnp GCF_000001405.40.gz  --tmp-dir .  --max-mnp-distance 2 (threads = 1) ran"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"1.00 times faster than gatk --java-options \"-Xmx13107M\" HaplotypeCaller  --input HG001-HiSeq4000-Agilentv7-GRCh38.recal.bam  --output HG001-HiSeq4000-Agilentv7-GRCh38.haplotypecaller.vcf.gz  --reference GCA_000001405.15_GRCh38_full_analysis_set.fna  --dbsnp GCF_000001405.40.gz  --tmp-dir .  --max-mnp-distance 2 (threads = 6)"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"1.01 times faster than gatk --java-options \"-Xmx13107M\" HaplotypeCaller  --input HG001-HiSeq4000-Agilentv7-GRCh38.recal.bam  --output HG001-HiSeq4000-Agilentv7-GRCh38.haplotypecaller.vcf.gz  --reference GCA_000001405.15_GRCh38_full_analysis_set.fna  --dbsnp GCF_000001405.40.gz  --tmp-dir .  --max-mnp-distance 2 (threads = 4)"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"1.01 times faster than gatk --java-options \"-Xmx13107M\" HaplotypeCaller  --input HG001-HiSeq4000-Agilentv7-GRCh38.recal.bam  --output HG001-HiSeq4000-Agilentv7-GRCh38.haplotypecaller.vcf.gz  --reference GCA_000001405.15_GRCh38_full_analysis_set.fna  --dbsnp GCF_000001405.40.gz  --tmp-dir .  --max-mnp-distance 2 (threads = 2)"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"1.02 times faster than gatk --java-options \"-Xmx13107M\" HaplotypeCaller  --input HG001-HiSeq4000-Agilentv7-GRCh38.recal.bam  --output HG001-HiSeq4000-Agilentv7-GRCh38.haplotypecaller.vcf.gz  --reference GCA_000001405.15_GRCh38_full_analysis_set.fna  --dbsnp GCF_000001405.40.gz  --tmp-dir .  --max-mnp-distance 2 (threads = 12)# Reproductibilité"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"On utilise nix 23.05 dans un flake : les version ne bougent donc pas."},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Liste des versions données par"}]},{"ID":"20240513233558-gium28p","Type":"NodeParagraph","Properties":{"id":"20240513233558-gium28p","updated":"20240513233558"},"Children":[{"Type":"NodeText","Data":"nix profile list | awk '{print $4}' | awk -F '-' '{print \"|\" $2\" | \"$3}'"}]},{"ID":"20240513233559-743ig8g","Type":"NodeTable","Data":"|    Logiciels    | Version validée |\n|    ---          | ---             |\n|        R        |          4.2.3  |\n|       bwa       |       unstable  |\n|    rtg-tools    |       ?s        |\n|      gatk       |        4.4.0.0  |\n|      spip       |                 |\n|     awscli2     |        2.11.20  |\n|     fastqc      |                 |\n|     hap.py      |                 |\n|     htslib      |           1.17  |\n|     multiqc     |           1.15  |\n|     picard      |         ?       |\n|     python3     |        3.10.12  |\n|     zoxide      |          0.9.2  |\n|    bcftools     |           1.17  |\n|    bedtools     |         2.31.0  |\n|    dos2unix     |          7.4.4  |\n|     ensembl     |  perl5.36.0 + ?\n|    mosdepth     |          0.3.3  |\n|    nextflow     |        22.10.6  |\n|    samtools     |           1.17  |\n|    spliceai     |          1.3.1  |\n|    vcftools     |         0.1.16  |\n|   ensembl       |   perl5.36.0    |\n|   sratoolkit    |         2.11.3  |","TableAligns":[0,0],"Properties":{"id":"20240513233559-743ig8g","updated":"20240513233559"},"Children":[{"Type":"NodeTableHead","Properties":{"id":""},"Children":[{"Type":"NodeTableRow","Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"Logiciels"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"Version validée"}]}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"R"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"4.2.3"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"bwa"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"unstable"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"rtg-tools"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"?s"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"gatk"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"4.4.0.0"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"spip"}]},{"Type":"NodeTableCell","Properties":{"id":""}}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"awscli2"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"2.11.20"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"fastqc"}]},{"Type":"NodeTableCell","Properties":{"id":""}}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"hap.py"}]},{"Type":"NodeTableCell","Properties":{"id":""}}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"htslib"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"1.17"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"multiqc"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"1.15"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"picard"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"?"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"python3"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"3.10.12"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"zoxide"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"0.9.2"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"bcftools"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"1.17"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"bedtools"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"2.31.0"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"dos2unix"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"7.4.4"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"ensembl"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"perl5.36.0 + ?"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"mosdepth"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"0.3.3"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"nextflow"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"22.10.6"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"samtools"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"1.17"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"spliceai"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"1.3.1"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"vcftools"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"0.1.16"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"ensembl"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"perl5.36.0"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"sratoolkit"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"2.11.3"}]}]}]}]}