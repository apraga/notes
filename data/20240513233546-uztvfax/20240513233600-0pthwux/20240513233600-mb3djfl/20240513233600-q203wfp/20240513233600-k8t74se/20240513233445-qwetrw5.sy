{"ID":"20240513233445-qwetrw5","Spec":"1","Type":"NodeDocument","Properties":{"id":"20240513233445-qwetrw5","title":"varben","type":"doc","updated":"20240513233445"},"Children":[{"ID":"20240513233446-ujkjhgb","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240513233446-ujkjhgb","updated":"20240513233446"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeText","Data":"Varben"}]},{"ID":"20240513233447-2ozvgzp","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240513233447-2ozvgzp","updated":"20240513233447"},"Children":[{"ID":"20240513233448-012bpjc","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240513233448-012bpjc","updated":"20240513233448"},"Children":[{"ID":"20240513233449-esjnf7n","Type":"NodeParagraph","Properties":{"id":"20240513233449-esjnf7n","updated":"20240513233449"},"Children":[{"Type":"NodeText","Data":"Installer bedtools, samtools et bwa"}]}]},{"ID":"20240513233450-zx1vqfd","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240513233450-zx1vqfd","updated":"20240513233450"},"Children":[{"ID":"20240513233451-bygho4v","Type":"NodeParagraph","Properties":{"id":"20240513233451-bygho4v","updated":"20240513233451"},"Children":[{"Type":"NodeText","Data":"Code a du être converti en python3 (avec 2to3)"}]}]},{"ID":"20240513233452-znsw38j","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":3,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240513233452-znsw38j","updated":"20240513233452"},"Children":[{"ID":"20240513233453-4zvjw7r","Type":"NodeParagraph","Properties":{"id":"20240513233453-4zvjw7r","updated":"20240513233453"},"Children":[{"Type":"NodeText","Data":"Validé sur chr20 et un test fournis (cf varben-journal.md)"}]}]}]},{"ID":"20240513233454-h3dfdim","Type":"NodeParagraph","Properties":{"id":"20240513233454-h3dfdim","updated":"20240513233454"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"Important"}]},{"ID":"20240513233455-6grdskd","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240513233455-6grdskd","updated":"20240513233455"},"Children":[{"ID":"20240513233456-5f4f4dt","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240513233456-5f4f4dt","updated":"20240513233456"},"Children":[{"ID":"20240513233457-mrno8az","Type":"NodeParagraph","Properties":{"id":"20240513233457-mrno8az","updated":"20240513233457"},"Children":[{"Type":"NodeText","Data":"il faut enlever les \"hardclip\" du bam (cf varben-journal.md) )"}]}]},{"ID":"20240513233458-znbcorv","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240513233458-znbcorv","updated":"20240513233458"},"Children":[{"ID":"20240513233459-58zvb5x","Type":"NodeParagraph","Properties":{"id":"20240513233459-58zvb5x","updated":"20240513233459"},"Children":[{"Type":"NodeText","Data":"pour la conversion bam -\u003e fastqc, il faut trier le bam avant (sinon on perd trop de read)"}]}]}]},{"ID":"20240513233460-vsut4xs","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240513233460-vsut4xs","updated":"20240513233460"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeText","Data":"Variants sanger sur  NA12878 bisonex"}]},{"ID":"20240513233461-ij2hf98","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513233461-ij2hf98","updated":"20240513233461"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"Création du BAM"}]},{"ID":"20240513233462-57bkg22","Type":"NodeParagraph","Properties":{"id":"20240513233462-57bkg22","updated":"20240513233462"},"Children":[{"Type":"NodeText","Data":"On utilise les données NA12878. Sampleesheet "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"na12878.csv"}]},{"ID":"20240513233463-v1rmvfh","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233463-v1rmvfh","updated":"20240513233463"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"patient,sample,fastq1,fastq2\n2300346867_63118093,NA12878,/Work/Groups/bisonex/centogene/fastq/2300346867_63118093_NA12878/63118093_S260_R1_001.fastq.gz,/Work/\nGroups/bisonex/centogene/fastq/2300346867_63118093_NA12878/63118093_S260_R2_001.fastq.gz\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233464-6xgf0uk","Type":"NodeParagraph","Properties":{"id":"20240513233464-6xgf0uk","updated":"20240513233464"},"Children":[{"Type":"NodeText","Data":"Pipeline"}]},{"ID":"20240513233465-szzji73","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233465-szzji73","updated":"20240513233465"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"nextflow run main.nf -profile standard,helios --genome=GRCh38 --input=na12878.csv -with-report na12878.report -with-trace -bg\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233466-60f6a4p","Type":"NodeParagraph","Properties":{"id":"20240513233466-60f6a4p","updated":"20240513233466"},"Children":[{"Type":"NodeText","Data":"Il faut ensuite supprimer les hardclip pour varben"}]},{"ID":"20240513233467-fsrqk6a","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233467-fsrqk6a","updated":"20240513233467"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"cd out/preprocessing/recalibrated/2300346867_63118093-NA12878-GRCh38\nsamtools view -h 2300346867_63118093-NA12878-GRCh38.recal.bam | awk '$6 !~ /H/{print}' | samtools view -bS - \u003e 2300346867_63118093-NA12878-GRCh38.recal.nohardclip.bam\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233468-7g6k6tl","Type":"NodeParagraph","Properties":{"id":"20240513233468-7g6k6tl","updated":"20240513233468"},"Children":[{"Type":"NodeText","Data":"On ajoute les génomes :"}]},{"ID":"20240513233469-04ly0g1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233469-04ly0g1","updated":"20240513233469"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"cd /Work/Users/apraga/exomevalidator\nln -s /Work/Groups/bisonex/data/fasta/GRCh38/bwa/* .\nln -s /Work/Groups/bisonex/data/fasta/GRCh38/GCA_000001405.15_GRCh38_full_analysis_set.fna .\nln -s /Work/Groups/bisonex/data/fasta/GRCh38/GCA_000001405.15_GRCh38_full_analysis_set.fna.fai \n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233470-3d79uji","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513233470-3d79uji","updated":"20240513233470"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"Préparation des variants"}]},{"ID":"20240513233471-oec0dq5","Type":"NodeParagraph","Properties":{"id":"20240513233471-oec0dq5","updated":"20240513233471"},"Children":[{"Type":"NodeText","Data":"On utilise "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"../code/varben/tovarben.nu"},{"Type":"NodeText","Data":" pour formatter la liste de variants au format adéquat pour varben "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"sanger_variants.tsv"},{"Type":"NodeText","Data":"."}]},{"ID":"20240513233472-v7cokou","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20240513233472-v7cokou","updated":"20240513233472"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"Attention aux duplications"}]},{"ID":"20240513233473-9drwdiz","Type":"NodeParagraph","Properties":{"id":"20240513233473-9drwdiz","updated":"20240513233473"},"Children":[{"Type":"NodeText","Data":"Varben ne supporte pas les duplications en mode mutation (seulement variants structurels). Il faut les écrire sous forme d'insertion."},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Ex:"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"g.169821134dup correspond à la duplication de T en position  169821134."},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"La notation VCF est correcte 169821133 G GT"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Cela correspond à une insertion entre  169821133 et 169821134 d'un T, soit"}]},{"ID":"20240513233474-gxo5516","Type":"NodeParagraph","Properties":{"id":"20240513233474-gxo5516","updated":"20240513233474"},"Children":[{"Type":"NodeText","Data":"169821133 169821134 0.5 ins T"}]},{"ID":"20240513233475-f4y6i4t","Type":"NodeParagraph","Properties":{"id":"20240513233475-f4y6i4t","updated":"20240513233475"},"Children":[{"Type":"NodeText","Data":"Il faut donc bien supprimer le premier nucléotide de la représentation VCF !"}]},{"ID":"20240513233476-9ycfhjz","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513233476-9ycfhjz","updated":"20240513233476"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"Insertion des variants"}]},{"ID":"20240513233477-0avqo03","Type":"NodeParagraph","Properties":{"id":"20240513233477-0avqo03","updated":"20240513233477"},"Children":[{"Type":"NodeText","Data":"Avec"}]},{"ID":"20240513233478-0gh00ok","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"c2x1cm0=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233478-0gh00ok","updated":"20240513233478"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2x1cm0=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\n#!/bin/bash -l\n# Fichier submission.SBATCH\n\n#SBATCH --job-name=\"varben\"\n#SBATCH --output=%x.%J.out   ## %x=job name, %J=job id\n#SBATCH --error=%x.%J.out\n # walltime (hh:mm::ss) max is 8 days\n#SBATCH -t 4:00:00\n#SBATCH --partition=smp\n#SBATCH -c 1  ## request 16 cores (MAX is 32)\n#SBATCH --mem=16G ## (MAX is 96G)\n#SBATCH --mail-user=apraga@chu-besancon.fr\n#SBATCH --mail-type=END,FAIL   # notify when job end/fail\n\nmodule load nix\nmuteditor -r ../GCA_000001405.15_GRCh38_full_analysis_set.fna   --aligner bwa --alignerIndex ../GCA_000001405.15_GRCh38_full_analysis_set.fna  -o na12878-sanger -m ../sanger_varben.tsv  --mindepth 5 -b ../../bisonex/out/preprocessing/recalibrated/2300346867_63118093-NA12878-GRCh38/2300346867_63118093-NA12878-GRCh38.recal.nohardclip.bam\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233479-jr98dp5","Type":"NodeParagraph","Properties":{"id":"20240513233479-jr98dp5","updated":"20240513233479"},"Children":[{"Type":"NodeText","Data":"Dans exomevalidator/scripts,"}]},{"ID":"20240513233480-h8y27eu","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233480-h8y27eu","updated":"20240513233480"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"sbatch varben.slurm\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233481-x46y97p","Type":"NodeParagraph","Properties":{"id":"20240513233481-x46y97p","updated":"20240513233481"},"Children":[{"Type":"NodeText","Data":"59min temps écoulé, 3h50 de temps CPU (mais est-ce vraiment parallélisé)."},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Un seul variant n'a pas été inséré car 0 read : SNV  chr21   43426167"}]},{"ID":"20240513233482-dkxfvel","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513233482-dkxfvel","updated":"20240513233482"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"Conversion en fastq"}]},{"ID":"20240513233483-kcsfjxg","Type":"NodeParagraph","Properties":{"id":"20240513233483-kcsfjxg","updated":"20240513233483"},"Children":[{"Type":"NodeText","Data":"On utilise initialement bam2fastq, mais après vérification auprès d'Alexis + internet, on passe à samtools fastq."}]},{"ID":"20240513233484-apud2cs","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233484-apud2cs","updated":"20240513233484"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"cd na12878-sanger/\ncp edit.sorted.bam NA12878-sanger-GRCh38.bam\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233485-dxq6xm1","Type":"NodeParagraph","Properties":{"id":"20240513233485-dxq6xm1","updated":"20240513233485"},"Children":[{"Type":"NodeText","Data":"On utilise bam2fastq2.slurm avec 4 threads (~12min au lieu de 50 en séquentiel)"}]},{"ID":"20240513233486-wn6lp6i","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"c2x1cm0=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233486-wn6lp6i","updated":"20240513233486"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2x1cm0=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\n#!/bin/bash -l\n# Fichier submission.SBATCH\n\n#SBATCH --job-name=\"bam2fastq\"\n#SBATCH --output=%x.%J.out   ## %x=job name, %J=job id\n#SBATCH --error=%x.%J.out\n # walltime (hh:mm::ss) max is 8 days\n#SBATCH -t 4:00:00\n#SBATCH --partition=smp\n#SBATCH -c 4  ## request 16 cores (MAX is 32)\n#SBATCH --mem=24G ## (MAX is 96G)\n#SBATCH --mail-user=apraga@chu-besancon.fr\n#SBATCH --mail-type=END,FAIL   # notify when job end/fail\n\ndir=na12878-sanger\nprefix=NA12878-sanger-GRCh38\nbam=$dir/$prefix.bam\nsorted=$dir/${prefix}-sorted.bam\ncores=4\n\nsamtools sort -n $bam -o $sorted -@ $cores\nsamtools fastq -1 $dir/${prefix}_R1_001.fastq -2 $dir/${prefix}_R2_001.fastq -0 /dev/null -s /dev/null -n -@ $cores $sorted\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233487-aigy9d4","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513233487-aigy9d4","updated":"20240513233487"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"Pipeline"}]},{"ID":"20240513233488-9xb314u","Type":"NodeParagraph","Properties":{"id":"20240513233488-9xb314u","updated":"20240513233488"},"Children":[{"Type":"NodeText","Data":"Avec le samplesheet"}]},{"ID":"20240513233489-ijibxlw","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"c2FuZ2VyLXZhcmJlbi5jc3Y=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233489-ijibxlw","updated":"20240513233489"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2FuZ2VyLXZhcmJlbi5jc3Y=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"patient,sample,fastq1,fastq2\nNA12878,sanger-varben,/Work/Users/apraga/exomevalidator/scripts/na12878-sanger/NA12878-sanger-GRCh38_R1_001.fastq,/Work/Users/apraga/exomevalidator/scripts/na12878-sanger/NA12878-sanger-GRCh38_R2_001.fastq\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233490-xz8g2y4","Type":"NodeParagraph","Properties":{"id":"20240513233490-xz8g2y4","updated":"20240513233490"},"Children":[{"Type":"NodeText","Data":"On utilise un script slurm pour lancer nextflow sur helios (voir helios.md)"}]},{"ID":"20240513233491-c4nd8gv","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"c2x1cm0=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233491-c4nd8gv","updated":"20240513233491"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2x1cm0=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"#!/bin/bash -l\n# Fichier submission.SBATCH\n\n#SBATCH --job-name=\"bisonex-varben\"\n#SBATCH --output=%x.%J.out   ## %x=job name, %J=job id\n#SBATCH --error=%x.%J.out\n # walltime (hh:mm::ss) max is 8 days\n#SBATCH -t 24:00:00\n#SBATCH --partition=smp\n#SBATCH -c 1  ## request 16 cores (MAX is 32)\n#SBATCH --mem=12G ## (MAX is 96G)\n#SBATCH --mail-user=apraga@chu-besancon.fr\n#SBATCH --mail-type=END,FAIL   # notify when job end/fail\n\nmodule load nix/2.11.0\n\n# Otherwise job fails as it cannot write to $HOME/.nextflow\nexport NXF_HOME=/Work/Users/apraga/.nextflow\n\n# user.name must be forced (again... our fix does not seem to work in nix)\nnextflow -Duser.name=apraga run main.nf -profile standard,helios --input=sanger-varben.csv --genome=GRCh38 -resume  8749b270-ca2c-4f72-82d9-69fff6563c56\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233492-gwg0g57","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240513233492-gwg0g57","updated":"20240513233492"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeText","Data":"Comparaison"}]},{"ID":"20240513233493-0ruuzn3","Type":"NodeParagraph","Properties":{"id":"20240513233493-0ruuzn3","updated":"20240513233493"},"Children":[{"Type":"NodeText","Data":"Pour variants sanger, génération d'un VCF pour utiliser rtg vcfeval. Cf "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"../code/varben/tovcf.nu","TextMarkTextContent":"script nu"}]},{"ID":"20240513233494-l6cfodw","Type":"NodeParagraph","Properties":{"id":"20240513233494-l6cfodw","updated":"20240513233494"},"Children":[{"Type":"NodeText","Data":"vcfeval requiert un champ GT, ajouté par le script en fonction de la zygotie ( "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"--sample ALT"},{"Type":"NodeText","Data":")."}]},{"ID":"20240513233495-29xrk9r","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513233495-29xrk9r","updated":"20240513233495"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"Test sur chr1:"}]},{"ID":"20240513233496-177px8i","Type":"NodeTable","Data":"Threshold  True-pos-baseline  True-pos-call  False-pos  False-neg  Precision  Sensitivity  F-measure\n----------------------------------------------------------------------------------------------------\n94.000                  4              4       9508          7     0.0004       0.3636     0.0008\nNone                 10             10     482190          1     0.0000       0.9091     0.0000","TableAligns":[0],"Properties":{"id":"20240513233496-177px8i","updated":"20240513233496"},"Children":[{"Type":"NodeTableHead","Properties":{"id":""},"Children":[{"Type":"NodeTableRow","Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"Threshold  True-pos-baseline  True-pos-call  False-pos  False-neg  Precision  Sensitivity  F-measure"}]}]}]},{"Type":"NodeTableRow","TableAligns":[0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"94.000                  4              4       9508          7     0.0004       0.3636     0.0008"}]}]},{"Type":"NodeTableRow","TableAligns":[0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"None                 10             10     482190          1     0.0000       0.9091     0.0000"}]}]}]},{"ID":"20240513233497-kpi4n7w","Type":"NodeParagraph","Properties":{"id":"20240513233497-kpi4n7w","updated":"20240513233497"},"Children":[{"Type":"NodeText","Data":"Le faux négatif est homozygote mais appelé par erreur hétérozygote. C'est surtout du à un faible nombre de read : 2/12 portent le variant"}]},{"ID":"20240513233498-r1vlz29","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513233498-r1vlz29","updated":"20240513233498"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"Tous les variants"}]},{"ID":"20240513233499-kyl1t4p","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240513233499-kyl1t4p","updated":"20240513233499"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"Appel de variants"}]},{"ID":"20240513233500-g78okdx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233500-g78okdx","updated":"20240513233500"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"rm -rf sanger-varben \nrtg vcfeval -b ~/research/bisonex/code/varben/sanger.vcf.gz -c ~/code/bisonex/out/call_variant/haplotype caller/NA12878-sanger-varben-GRCh38/NA12878-sanger-varben-GRCh38.haplotypecaller.vcf.gz -t genome/sdf -o sanger-varben --output-m ode=annotate\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233501-h627pv0","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240513233501-h627pv0","updated":"20240513233501"},"Children":[{"ID":"20240513233502-x98gld6","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240513233502-x98gld6","updated":"20240513233502"},"Children":[{"ID":"20240513233503-qr6apig","Type":"NodeParagraph","Properties":{"id":"20240513233503-qr6apig","updated":"20240513233503"},"Children":[{"Type":"NodeText","Data":"1 faux négatif qui n'a effectivement pas été inséré par varben par manque de reads  "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"zgrep FN sanger-varben/baseline.vcf.gz | zgrep -v FN_CA"}]}]},{"ID":"20240513233504-r0kgzca","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240513233504-r0kgzca","updated":"20240513233504"},"Children":[{"ID":"20240513233505-7cp2yrx","Type":"NodeParagraph","Properties":{"id":"20240513233505-7cp2yrx","updated":"20240513233505"},"Children":[{"Type":"NodeText","Data":"13 négatifs mais sur la zygosity (alors qu'ils ont été bien inséré ) "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"zgrep FN sanger-varben/baseline.vcf.gz | zgrep FN_CA"}]}]}]},{"ID":"20240513233506-siskvf5","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240513233506-siskvf5","updated":"20240513233506"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"Filtre après l'appel de variants"}]},{"ID":"20240513233507-ia93oli","Type":"NodeParagraph","Properties":{"id":"20240513233507-ia93oli","updated":"20240513233507"},"Children":[{"Type":"NodeText","Data":"Filtre sur la profondeur: une délétion est filtrée en plus car 21 reads seulements en  chr6    72622255"}]},{"ID":"20240513233508-xzgu5hq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"bnU=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233508-xzgu5hq","updated":"20240513233508"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bnU=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":" let f = \"../bisonex/out/call_variant/filter/NA12878-sanger-varben-GRCh38/NA12878-sanger-varben-GRCh38.filter.depth\n.vcf\"\nbgzip $f ; tabix -p vcf $\"($f).gz\" ; rtg vcfeval -b ~/research/bisonex/code/varben/sanger.vcf.gz -c $\"($f).gz\" -t g\nenome/sdf -o sanger-varben-filter-depth --output-mode=annotate\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233509-ccabwcw","Type":"NodeParagraph","Properties":{"id":"20240513233509-ccabwcw","updated":"20240513233509"},"Children":[{"Type":"NodeText","Data":"Filtre sur SNP: idem"}]},{"ID":"20240513233510-a7c66ze","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"bnU=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233510-a7c66ze","updated":"20240513233510"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bnU=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"let f = \"../bisonex/out/call_variant/filter/NA12878-sanger-varben-GRCh38/NA12878-sanger-varben-GRCh38.filter.polymormphisms.vcf\"\nbgzip $f ; tabix -p vcf $\"($f).gz\" ; rtg vcfeval -b ~/research/bisonex/code/varben/sanger.vcf.gz -c $\"($f).gz\" -t genome/sdf -o sanger-varben-filter-snp --output-mode=annotate\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233511-dghuvsc","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240513233511-dghuvsc","updated":"20240513233511"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"Filtre après annotation"}]},{"ID":"20240513233512-qx2kwff","Type":"NodeParagraph","Properties":{"id":"20240513233512-qx2kwff","updated":"20240513233512"},"Children":[{"Type":"NodeText","Data":"Idem !!"}]},{"ID":"20240513233513-6rm3348","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"bnU=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233513-6rm3348","updated":"20240513233513"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bnU=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"let f = \"../bisonex/out/annotate/filter/NA12878-sanger-varben-GRCh38/NA12878-sanger-varben-GRCh38.filtervep.vcf\"\nbgzip $f ; tabix -p vcf $\"($f).gz\" ; rtg vcfeval -b ~/research/bisonex/code/varben/sanger.vcf.gz -c $\"($f).gz\" -t genome/sdf -o sanger-varben-filter-vep --output-mode=annotate# TODO\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233514-5i7til9","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513233514-5i7til9","updated":"20240513233514"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"TODO"}]},{"ID":"20240513233515-y2ujlax","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240513233515-y2ujlax","updated":"20240513233515"},"Children":[{"ID":"20240513233516-3szymmm","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240513233516-3szymmm","updated":"20240513233516"},"Children":[{"ID":"20240513233517-drr6txy","Type":"NodeParagraph","Properties":{"id":"20240513233517-drr6txy","updated":"20240513233517"},"Children":[{"Type":"NodeText","Data":"lancer l'exécution depuis cli en Rust"}]}]},{"ID":"20240513233518-kjx73ff","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240513233518-kjx73ff","updated":"20240513233518"},"Children":[{"ID":"20240513233519-h8mioge","Type":"NodeParagraph","Properties":{"id":"20240513233519-h8mioge","updated":"20240513233519"},"Children":[{"Type":"NodeText","Data":"télécharger index du genome (.fnai + bwa)"}]}]}]}]}