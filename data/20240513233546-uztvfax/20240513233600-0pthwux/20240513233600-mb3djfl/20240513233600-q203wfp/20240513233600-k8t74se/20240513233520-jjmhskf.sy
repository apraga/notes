{"ID":"20240513233520-jjmhskf","Spec":"1","Type":"NodeDocument","Properties":{"id":"20240513233520-jjmhskf","title":"varben-journal","type":"doc","updated":"20240513233520"},"Children":[{"ID":"20240513233521-v0f61lo","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240513233521-v0f61lo","updated":"20240513233521"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeText","Data":"Test in silico: journal"}]},{"ID":"20240513233522-7u9m3hj","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513233522-7u9m3hj","updated":"20240513233522"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"Varben"}]},{"ID":"20240513233523-b8abxf2","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240513233523-b8abxf2","updated":"20240513233523"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"Tests fournis :"}]},{"ID":"20240513233524-1k9smeu","Type":"NodeParagraph","Properties":{"id":"20240513233524-1k9smeu","updated":"20240513233524"},"Children":[{"Type":"NodeText","Data":"cd examples"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"xz -d reference/chr*.fna.zx"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"cd src"}]},{"ID":"20240513233525-wi8lyn1","Type":"NodeParagraph","Properties":{"id":"20240513233525-wi8lyn1","updated":"20240513233525"},"Children":[{"Type":"NodeText","Data":"Pour illumina"}]},{"ID":"20240513233526-ozcqs87","Type":"NodeParagraph","Properties":{"id":"20240513233526-ozcqs87","updated":"20240513233526"},"Children":[{"Type":"NodeText","Data":"bash 03-spikein_snv_and_indel_Illumina.sh### Données clinvar ?"}]},{"ID":"20240513233527-volo99m","Type":"NodeParagraph","Properties":{"id":"20240513233527-volo99m","updated":"20240513233527"},"Children":[{"Type":"NodeText","Data":"Sur ce cas test, deletion, insertion et SNV ok. Substitution de toute une séquence aussi \"sub\""}]},{"ID":"20240513233528-z0mqxlp","Type":"NodeParagraph","Properties":{"id":"20240513233528-z0mqxlp","updated":"20240513233528"},"Children":[{"Type":"NodeText","Data":"chr7\t55221748\t55221748\t0.15\tdel\t."},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"chr7\t55227923\t55227923\t0.33\tins\tTGTTCC"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"chr7\t55242467\t55242481\t0.03\tsub\tTTC"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"chr7\t55249038\t55249038\t0.03\tsnv\tA"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"chr7\t55249092\t55249092\t0.05\tsnv\tC"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"chr7\t55259515\t55259515\t0.03\tsnv\tG"}]},{"ID":"20240513233529-l1woamy","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240513233529-l1woamy","updated":"20240513233529"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"chr20 sur HG001"}]},{"ID":"20240513233530-l4zdbm0","Type":"NodeParagraph","Properties":{"id":"20240513233530-l4zdbm0","updated":"20240513233530"},"Children":[{"Type":"NodeText","Data":"Après packagé avec nix, il faut formatter les données"}]},{"ID":"20240513233531-ms20ctg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"bnU=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233531-ms20ctg","updated":"20240513233531"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bnU=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"cd ~/research/bisonex/code/varben\nlet df = open ../parsevariants/variants_centogene_final.csv | where \"Confirmed in sanger\" == \"true\" and \"genomic (hg38)\" != \"\"  |  insert AF {|e| if ($e.zygosity == \"heterozygous\") { random float 0.4..0.5 } else { random float 0.8..1 } }  | select \"genomic (hg38)\" chrom pos AF alt  | rename genomic`\n\n$df | insert type {|e| if ($e.genomic | str contains \"\u003e\") { \"SNV\" } else if ($e.genomic | str contains \"del\") { \"del\" } else if ($e.genomic | str contains \"ins\") { \"ins\"} else if ($e.genomic | str contains \"dup\") { \"dup\"} else { $e.genomic }} | | insert chrom2 {|e| $\"chr($e.chrom)\" } | insert end {|e| $e.pos}  | select chrom2 pos end AF type alt | sort-by chrom2 pos end | to csv -s '\\t' | save sanger_varben.tsv -f\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233532-femzvku","Type":"NodeParagraph","Properties":{"id":"20240513233532-femzvku","updated":"20240513233532"},"Children":[{"Type":"NodeText","Data":"Et télécharger  index + index bwa"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Avec"}]},{"ID":"20240513233533-jqk6o15","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233533-jqk6o15","updated":"20240513233533"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"cd ~/code/exomevalidator\nrg chr20 ~/research/bisonex/code/varben/sanger_varben.tsv | save sanger_varben_chr20.tsv -f\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233534-2s01urs","Type":"NodeParagraph","Properties":{"id":"20240513233534-2s01urs","updated":"20240513233534"},"Children":[{"Type":"NodeText","Data":"Puis"}]},{"ID":"20240513233535-6wgjtbj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233535-6wgjtbj","updated":"20240513233535"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"./result/bin/muteditor -r GCA_000001405.15_GRCh38_full_analysis_set.fna -b ~/code/bisonex/out/preprocessing/recalibrated/HG001-HiSeq4000-Agilentv7-50x-GRCh38/HG001-HiSeq4000-Agilentv7-50x-GRCh38.recal-chr20.bam --aligner bwa --alignerIndex GCA_000001405.15_GRCh38_full_analysis_set.fna -o chr20 -m sanger_varben_chr20.tsv\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233536-0rgbp30","Type":"NodeParagraph","Properties":{"id":"20240513233536-0rgbp30","updated":"20240513233536"},"Children":[{"Type":"NodeText","Data":"À noter que l'exécution plante parfois (avec notre version packagée avec nix seulement ?):"}]},{"ID":"20240513233537-n0rcg82","Type":"NodeParagraph","Properties":{"id":"20240513233537-n0rcg82","updated":"20240513233537"},"Children":[{"Type":"NodeText","Data":"samtools sort -n -o chr20/tempDir/edit.sortByName.bam chr20/tempDir/edit.bam"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"[E::bam_read1] CIGAR and query sequence lengths differ for K00141:389:HGNTWBBXX:3:1209:1479:7855"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"samtools sort: truncated file. Aborting"}]},{"ID":"20240513233538-6aiz6at","Type":"NodeParagraph","Properties":{"id":"20240513233538-6aiz6at","updated":"20240513233538"},"Children":[{"Type":"NodeText","Data":"Ok en relancant..."}]},{"ID":"20240513233539-wyb5s3z","Type":"NodeParagraph","Properties":{"id":"20240513233539-wyb5s3z","updated":"20240513233539"},"Children":[{"Type":"NodeText","Data":"Puis conversion en fastq (déjà trié apparement)"}]},{"ID":"20240513233540-bp6s0ns","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233540-bp6s0ns","updated":"20240513233540"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"cd chr20\nsamtools bam2fq -n -@ 4 -1 chr20-snv_1.fq.gz -2 chr20-snv_2.fq.gz -0 chr20-snv_other.fq.gz -s chr20-snv_singleton.fq.gz edit.sorted.bam\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233541-3bdyh9g","Type":"NodeParagraph","Properties":{"id":"20240513233541-3bdyh9g","updated":"20240513233541"},"Children":[{"Type":"NodeText","Data":"On teste l'appel de variants"}]},{"ID":"20240513233542-x7cjtnv","Type":"NodeParagraph","Properties":{"id":"20240513233542-x7cjtnv","updated":"20240513233542"},"Children":[{"Type":"NodeText","Data":"rsync -avz chr20-snv_1.fq.gz chr20-snv_2.fq.gz meso:/Work/Users/apraga/bisonex/test/varben/"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Sur meso, faire varben.csv"}]},{"ID":"20240513233543-jun58xh","Type":"NodeParagraph","Properties":{"id":"20240513233543-jun58xh","updated":"20240513233543"},"Children":[{"Type":"NodeText","Data":"patient,sample,fastq1,fastq2"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"varben-sanger,chr20,test/varben/chr20-snv_1.fq.gz,test/varben/chr20-snv_2.fq.gz"}]},{"ID":"20240513233544-602i06r","Type":"NodeParagraph","Properties":{"id":"20240513233544-602i06r","updated":"20240513233544"},"Children":[{"Type":"NodeText","Data":"nextflow run main.nf -profile standard,helios --genome=GRCh38 --input=varben.csv"}]},{"ID":"20240513233545-24wzzns","Type":"NodeParagraph","Properties":{"id":"20240513233545-24wzzns","updated":"20240513233545"},"Children":[{"Type":"NodeText","Data":"On le trouve bien après l'appel de variant :)"}]},{"ID":"20240513233546-3zozkvw","Type":"NodeParagraph","Properties":{"id":"20240513233546-3zozkvw","updated":"20240513233546"},"Children":[{"Type":"NodeText","Data":"bcftools view work/ff/35fa5353da6da53e6914c1d67f7a79/varben-sanger-chr20-GRCh38.haplotypecaller.vcf.gz chr20:46043645-46043645"}]},{"ID":"20240513233547-953rn6o","Type":"NodeParagraph","Properties":{"id":"20240513233547-953rn6o","updated":"20240513233547"},"Children":[{"Type":"NodeText","Data":"Mais il est filtré sur la profondeur car 25 reads et le seuil est à 30 :("},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Possible car on utilise des données \"faible profondeur\" de bai2020 50x"}]},{"ID":"20240513233548-kzsgb4q","Type":"NodeParagraph","Properties":{"id":"20240513233548-kzsgb4q","updated":"20240513233548"},"Children":[{"Type":"NodeText","Data":"NB: spip plante si entrée vide"}]},{"ID":"20240513233549-hjp24ux","Type":"NodeParagraph","Properties":{"id":"20240513233549-hjp24ux","updated":"20240513233549"},"Children":[{"Type":"NodeText","Data":"Test insertion deletion ok. Test duplication: non fait"}]},{"ID":"20240513233550-ef85i1n","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20240513233550-ef85i1n","updated":"20240513233550"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"Erreur avec hardclip"}]},{"ID":"20240513233551-n932nc5","Type":"NodeParagraph","Properties":{"id":"20240513233551-n932nc5","updated":"20240513233551"},"Children":[{"Type":"NodeText","Data":"Erreur :"}]},{"ID":"20240513233552-ynfayls","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233552-ynfayls","updated":"20240513233552"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"Exception: Cmd Error: samtools sort -n -o na12878-sanger/tempDir/edit.sortByName.bam na12878-sanger/tempDir/edit.bam\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233553-z3jwf3u","Type":"NodeParagraph","Properties":{"id":"20240513233553-z3jwf3u","updated":"20240513233553"},"Children":[{"Type":"NodeText","Data":"D'après  https://github.com/nccl-jmli/VarBen/issues/18, il faut enlever les \"hardclip\""}]},{"ID":"20240513233554-open7ax","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233554-open7ax","updated":"20240513233554"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"cd ../../bisonex/out/preprocessing/recalibrated/2300346867_NA12878-63118093_S260-GRCh38/\nsamtools view -b -F 0x100 2300346867_63118093-NA12878-GRCh38.recal.bam \u003e 2300346867_63118093-NA12878-GRCh38.recal.nohardclip.bam\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233555-dm7qa8e","Type":"NodeParagraph","Properties":{"id":"20240513233555-dm7qa8e","updated":"20240513233555"},"Children":[{"Type":"NodeText","Data":"Mais pareil... On essaye la seconde suggestion"}]},{"ID":"20240513233556-kxf9kk6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240513233556-kxf9kk6","updated":"20240513233556"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"samtools view -h 2300346867_63118093-NA12878-GRCh38.recal.bam | awk '$6 !~ /H/{print}' | samtools view -bS - \u003e 2300346867_63118093-NA12878-GRCh38.recal.nohardclip.bam\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240513233557-kio4b7b","Type":"NodeParagraph","Properties":{"id":"20240513233557-kio4b7b","updated":"20240513233557"},"Children":[{"Type":"NodeText","Data":"Ok !"}]},{"ID":"20240513233558-oc7cnj2","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240513233558-oc7cnj2","updated":"20240513233558"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"Dup inséres aux mauvais endroit"}]},{"ID":"20240513233559-p8g04ej","Type":"NodeParagraph","Properties":{"id":"20240513233559-p8g04ej","updated":"20240513233559"},"Children":[{"Type":"NodeText","Data":"3e version : les bornes sont toujours pos et pos+1 et on supprimer le premier nucléotide de ALT."},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"Vérification des 4 dup"}]}]}