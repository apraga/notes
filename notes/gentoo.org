#+title: Gentoo

* Install
=sys-kernel/gentoo-kernel-bin= contient un noyau pré-compilé avec la plupart des choses nécessaires

* Config
** Fichiers
---- /etc/portage/make.conf ----
#+begin_src

# These settings were set by the catalyst build script that automatically
# built this stage.
# Please consult /usr/share/portage/config/make.conf.example for a more
# detailed example.
COMMON_FLAGS="-march=native -O2 -pipe"
CFLAGS="${COMMON_FLAGS}"
CXXFLAGS="${COMMON_FLAGS}"
FCFLAGS="${COMMON_FLAGS}"
FFLAGS="${COMMON_FLAGS}"

# NOTE: This stage was built with the bindist Use flag enabled
PORTDIR="/var/db/repos/gentoo"
DISTDIR="/var/cache/distfiles"
PKGDIR="/var/cache/binpkgs"

# This sets the language of build output to English.
# Please keep this setting intact when reporting bugs.
LC_MESSAGES=C

MAKEOPTS="-j4"
USE="X dist-kernel binary pulseaudio"
VIDEO_CARDS="nvidia"

GENTOO_MIRRORS="http://gentoo.mirrors.ovh.net/gentoo-distfiles/"
ACCEPT_LICENSE="*"
GRUB_PLATFORMS="efi-64"
#+end_src

Accept keywoards
---- /etc/portage/package.accept_keywords/haskell ----
#+begin_src sh
dev-lang/ghc ~amd64
dev-haskell/*
,*/*::haskell
x11-wm/xmonad*
#+end_src

---- /etc/portage/package.accept_keywords/lxde ----
#+begin_src sh
# required by lxde-base/lxde-meta-0.5.5-r7::gentoo
# required by lxde-meta (argument)
=lxde-base/lxpanel-0.10.1 ~amd64
# required by lxde-base/lxde-meta-0.5.5-r7::gentoo
# required by lxde-meta (argument)
=lxde-base/lxterminal-0.4.0 ~amd64
# required by lxde-base/lxde-meta-0.5.5-r7::gentoo
# required by lxde-meta (argument)
=lxde-base/lxsession-0.5.5 ~amd64
# required by lxde-base/lxde-meta-0.5.5-r7::gentoo
# required by lxde-meta (argument)
=lxde-base/lxde-common-0.99.2-r1 ~amd64
# required by lxde-meta (argument)
=lxde-base/lxde-meta-0.5.5-r7 ~amd64
# required by lxde-base/lxde-meta-0.5.5-r7::gentoo
# required by lxde-meta (argument)
=lxde-base/lxinput-0.3.5-r2 ~amd64
# required by lxde-base/lxpanel-0.10.1::gentoo
# required by lxde-base/lxde-meta-0.5.5-r7::gentoo
# required by lxde-meta (argument)
=x11-libs/libfm-1.3.2 ~amd64
# required by lxde-base/lxde-meta-0.5.5-r7::gentoo
# required by lxde-meta (argument)
=lxde-base/lxde-icon-theme-0.5.1-r1 ~amd64
# required by lxde-base/lxde-meta-0.5.5-r7::gentoo
# required by lxde-meta (argument)
=lxde-base/lxrandr-0.3.2-r1 ~amd64
# required by lxde-base/lxde-meta-0.5.5-r7::gentoo
# required by lxde-meta (argument)
=lxde-base/lxtask-0.1.10 ~amd64
# required by lxde-base/lxde-meta-0.5.5-r7::gentoo
# required by lxde-meta (argument)
=x11-misc/pcmanfm-1.3.2-r1 ~amd64
#+end_src

---- /etc/portage/package.use/emacs ----
#+begin_src sh
# Nativecomp with jit
# json for performances with doom-emacs
# xft for doomemacs
app-editors/emacs jit json xft
sys-devel/gcc jit

# For the deamon, do not use GTK as there a bug  wit X disconnect. Use lucid instead
app-editors/emacs athena Xaw3d -gtk -motif gui
#+end_src

---- /etc/portage/package.use/firefox ----
#+begin_src
# for selenium in python, we need the geckodriver
www-client/firefox geckodriver

# required by www-client/firefox-102.3.0::gentoo[system-libvpx]
# required by www-client/firefox (argument)
>=media-libs/libvpx-1.12.0 postproc
#+end_src
---- /etc/portage/package.use/japanese ----
#+begin_src
app-i18n/mozc ibus emacs
#+end_src
---- /etc/portage/package.use/latex ----
#+begin_src
app-text/texlive graphics pstricks L10N: en fr

# required by dev-texlive/texlive-xetex-2021-r1::gentoo
# required by dev-texlive/texlive-formatsextra-2021::gentoo
# required by app-text/texlive-2021::gentoo[-extra,xml]
# required by app-text/texlive (argument)
>=app-text/texlive-core-2021-r2 xetex
#+end_src
---- /etc/portage/package.use/polybar ----
#+begin_src
x11-misc/polybar mpd network
#+end_src
---- /etc/portage/package.use/strongswan ----
#+begin_src
# Permissions errors in non-root mode
net-vpn/strongswan -non-root
# Enable everything to have the equivalent of -extra-plugins from other distributions
# We just remove mysql and ldap
net-vpn/strongswan curl debug dhcp eap farp gcrypt pkcs11 sqlite strongswan_plugins_addrblock strongswan_plugins_aesni strongswan_plugins_blowfish strongswan_plugins_bypass-lan strongswan_plugins_ccm strongswan_plugins_chapoly strongswan_plugins_ctr strongswan_plugins_error-notify strongswan_plugins_forecast strongswan_plugins_gcm strongswan_plugins_ha strongswan_plugins_ipseckey strongswan_plugins_kdf strongswan_plugins_newhope strongswan_plugins_ntru strongswan_plugins_padlock strongswan_plugins_rdrand strongswan_plugins_save-keys strongswan_plugins_unbound strongswan_plugins_whitelist strongswan_plugins_xauth-noauth
#+end_src

** X
Sans bureau, il faut ajouter pulseaudio dans .xinitrc !

#+begin_src sh
setxkbmap fr bepo
feh --bg-scale ~/pictures/gentoo.jpg &
exec pulseaudio &
exec xmonad

#+end_src
